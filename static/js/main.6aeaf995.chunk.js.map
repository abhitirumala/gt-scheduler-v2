{"version":3,"sources":["reducers/db.js","constants.js","utils.js","reducers/env.js","reducers/user.js","reducers/index.js","libs/ics.js","components/SemiPureComponent/index.jsx","components/ActionRow/index.jsx","components/Button/index.jsx","components/Calendar/index.jsx","components/DisplayGpa/index.jsx","components/Course/index.jsx","components/CourseAdd/index.jsx","components/Instructor/index.jsx","components/Palette/index.jsx","components/TimeBlocks/index.jsx","beans/Oscar.js","beans/Course.js","beans/Section.js","beans/SortingOption.js","components/App/index.jsx","index.js"],"names":["setOscar","createAction","oscar","actions","handleActions","combineActions","state","payload","DAYS","stringToTime","string","exec","hour","minute","Number","parseInt","timeToString","time","ampm","periodToString","period","start","end","getRandomColor","from","to","hex","i","component","Math","random","toString","length","getContentClassName","color","r","substring","g","b","hasConflictBetween","section1","section2","meetings","some","meeting1","meeting2","day","days","includes","classes","classList","filter","c","join","isMobile","window","innerWidth","simplifyName","name","tokens","split","shift","pop","unique","array","Set","isLab","section","scheduleType","isLecture","setMobile","mobile","defaultState","setTerm","term","loadData","setDesiredCourses","desiredCourses","setPinnedCrns","pinnedCrns","setExcludedCrns","excludedCrns","setColorMap","colorMap","setSortingOptionIndex","sortingOptionIndex","Cookies","get","json","JSON","parse","e","forEach","courseId","deprecatedData","set","remove","newState","stringify","expires","saveData","dbActions","envActions","userActions","ics","uidDomain","prodId","navigator","userAgent","indexOf","SEPARATOR","appVersion","calendarEvents","calendarStart","calendarEnd","BYDAY_VALUES","subject","description","location","begin","stop","rrule","freq","until","isNaN","Date","interval","count","byday","Object","prototype","call","d","elem","pos","start_date","end_date","now_date","start_year","getFullYear","slice","start_month","getMonth","start_day","getDate","start_hours","getHours","start_minutes","getMinutes","start_seconds","getSeconds","end_year","end_month","end_day","end_hours","end_minutes","end_seconds","start_time","end_time","rruleString","now","uDate","toISOString","replace","calendarEvent","splice","push","filename","ext","blob","calendar","Blob","bb","BlobBuilder","append","getBlob","document","characterSet","saveAs","console","log","SemiPureComponent","nextProps","nextState","stateChanged","this","propsChanged","a","aKeys","keys","bKeys","every","key","shallowCompareEntries","props","Component","ActionRow","className","children","restProps","action","map","icon","style","backgroundColor","fixedWidth","rel","target","Button","disabled","Calendar","overlayCrns","preview","capture","env","user","Array","fill","_","timeToShortString","crn","overlay","connect","DisplayGpa","useState","background","setBackground","gpa","setGpa","setUrl","useEffect","courseString","$","ajax","url","type","dataType","headers","success","res","newGpa","cheerio","load","text","round","setColor","error","value","value2color","min","max","base","NormalText","styled","div","TextBox","Course","expanded","paletteShown","handleSelectColor","bind","course","id","sections","undefined","setState","onAddCourse","onSetOverlayCrns","db","findCourse","textClassName","instructorMap","instructors","primaryInstructor","infoAction","faInfoCircle","href","number","faPlus","onClick","faAngleUp","faAngleDown","handleToggleExpanded","faPalette","handleTogglePaletteShown","faTrash","handleRemoveCourse","fontWeight","fromClass","fontStyle","dangerouslySetInnerHTML","__html","title","onSelectColor","onMouseLeave","CourseAdd","keyword","inputRef","React","createRef","handleChangeKeyword","handlePressEnter","preventDefault","courses","searchCourses","handleAddCourse","tbaCrns","meeting","current","focus","ref","onChange","placeholder","onKeyPress","Instructor","crns","instructorExcluded","instructorPinned","encodeURIComponent","faCheck","handleIncludeAll","faBan","handleExcludeAll","excluded","pinned","onMouseEnter","faTimes","faThumbtack","handleTogglePinned","handleToggleExcluded","Palette","colors","paletteColor","TimeBlocks","findSection","top","height","where","Oscar","data","dateRanges","scheduleTypes","campuses","dateRange","v","setHours","courseMap","crnMap","sortingOptions","SortingOption","combination","startMap","endMap","reduce","sum","ends","values","starts","toUpperCase","startsWith","crnsList","dfs","courseIndex","isIncluded","isPinned","hasConflict","hasLab","pinnedOnlyLecture","onlyLectures","find","pinnedOnlyLab","onlyLabs","pinnedAllInOne","allInOnes","associatedLabs","lab","associatedLectures","lecture","sectionGroups","sectionGroup","iterateTimeBlocks","combinations","sortingOption","factor","calculateFactor","sort","callback","sectionId","Section","lonelyLectures","lonelyLabs","distinct","groups","sectionGroupMeetings","sectionGroupHash","hash","credits","scheduleTypeIndex","campusIndex","campus","dateRangeIndex","instructor","label","App","handleResize","nextMobile","handleSetOverlayCrns","handleExport","cal","getDay","setDate","M","T","W","R","F","addEvent","download","handleDownload","captureRef","domtoimage","toPng","width","offsetWidth","offsetHeight","left","transform","then","handleChangeTab","tabIndex","handleChangeSemester","loadOscar","handleSetPinnedCrns","handleResetPinnedCrns","confirm","handleChangeSortingOptionIndex","terms","axios","reverse","recentTerm","addEventListener","removeEventListener","memoizedGetCombinations","memoizeOne","getCombinations","memoizedSortCombinations","sortCombinations","sortedCombinations","rowCount","rowHeight","rowRenderer","index","getTotalCredits","year","semester","getSemesterName","expandable","tabTitle","data-ribbon","store","createStore","combineReducers","reducers","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.6aeaf995.chunk.js","sourcesContent":["import { combineActions, createAction, handleActions } from 'redux-actions';\n\nconst prefix = 'DB';\n\nconst setOscar = createAction(`${prefix}/SET_OSCAR`, oscar => ({ oscar }));\n\nexport const actions = {\n  setOscar,\n};\n\nconst defaultState = {\n  oscar: null,\n};\n\nexport default handleActions({\n  [combineActions(\n    setOscar,\n  )]: (state, { payload }) => ({\n    ...state,\n    ...payload,\n  }),\n}, defaultState);\n","const OPEN = 8 * 60;\nconst CLOSE = 21 * 60;\nconst DAYS = ['M', 'T', 'W', 'R', 'F'];\n\nconst PNG_SCALE_FACTOR = 2;\n\nexport {\n  OPEN,\n  CLOSE,\n  DAYS,\n  PNG_SCALE_FACTOR,\n};\n","import { DAYS } from './constants';\n\nconst stringToTime = string => {\n  const [, hour, minute, ampm] = /(\\d{1,2}):(\\d{2}) (a|p)m/.exec(string);\n  return ((ampm === 'p' ? 12 : 0) + Number.parseInt(hour % 12)) * 60 + Number.parseInt(minute);\n};\n\nconst timeToString = (time, ampm = true) => {\n  const hour = time / 60 | 0;\n  const minute = time % 60;\n  return `${hour > 12 ? hour - 12 : hour}:${minute < 10 ? '0' + minute : minute}${ampm ? ` ${hour < 12 ? 'a' : 'p'}m` : ''}`;\n};\n\nconst timeToShortString = time => {\n  const hour = time / 60 | 0;\n  return `${hour > 12 ? hour - 12 : hour}${hour < 12 ? 'a' : 'p'}m`;\n};\n\nconst periodToString = period => period ? `${timeToString(period.start, false)} - ${timeToString(period.end)}` : 'TBA';\n\nconst getRandomColor = (from = 0, to = 256) => {\n  let hex = '#';\n  for (let i = 0; i < 3; i++) {\n    const component = (Math.random() * (to - from) + from | 0).toString(16);\n    hex += (component.length === 1 ? '0' : '') + component;\n  }\n  return hex;\n};\n\nconst getContentClassName = (color = '#BBBBBB') => {\n  const r = parseInt(color.substring(1, 3), 16);\n  const g = parseInt(color.substring(3, 5), 16);\n  const b = parseInt(color.substring(5, 7), 16);\n  return r * .299 + g * .587 + b * .114 > 128 ? 'dark-content' : 'light-content';\n};\n\nconst hasConflictBetween = (section1, section2) =>\n  section1.meetings.some(meeting1 =>\n    section2.meetings.some(meeting2 =>\n      meeting1.period && meeting2.period &&\n      DAYS.some(day => meeting1.days.includes(day) && meeting2.days.includes(day)) &&\n      meeting1.period.start < meeting2.period.end && meeting2.period.start < meeting1.period.end));\n\nconst classes = (...classList) => classList.filter(c => c).join(' ');\n\nconst isMobile = () => window.innerWidth < 768;\n\nconst shallowCompareEntries = (a, b) => {\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  return aKeys.length === bKeys.length && aKeys.every(key => key in b && a[key] === b[key]);\n};\n\nconst simplifyName = name => {\n  const tokens = name.split(' ');\n  const firstName = tokens.shift();\n  const lastName = tokens.pop();\n  return [firstName, lastName].join(' ');\n};\n\nconst unique = array => [...new Set(array)];\n\nconst isLab = section => section.scheduleType.includes('Lab');\n\nconst isLecture = section => section.scheduleType.includes('Lecture');\n\nconst getSemesterName = term => {\n  const year = term.substring(0, 4);\n  const semester = (() => {\n    switch (Number.parseInt(term.substring(4))) {\n      case 1:\n        return 'Winter';\n      case 2:\n      case 3:\n        return 'Spring';\n      case 5:\n      case 6:\n        return 'Summer';\n      case 8:\n      case 9:\n        return 'Fall';\n      default:\n        return 'Unknown';\n    }\n  })();\n  return `${semester} ${year}`;\n};\n\nexport {\n  stringToTime,\n  timeToString,\n  timeToShortString,\n  periodToString,\n  getRandomColor,\n  getContentClassName,\n  hasConflictBetween,\n  classes,\n  isMobile,\n  shallowCompareEntries,\n  simplifyName,\n  unique,\n  isLab,\n  isLecture,\n  getSemesterName,\n};\n","import { combineActions, createAction, handleActions } from 'redux-actions';\nimport { isMobile } from '../utils';\n\nconst prefix = 'ENV';\n\nconst setMobile = createAction(`${prefix}/SET_MOBILE`, mobile => ({ mobile }));\n\nexport const actions = {\n  setMobile,\n};\n\nconst defaultState = {\n  mobile: isMobile(),\n};\n\nexport default handleActions({\n  [combineActions(\n    setMobile,\n  )]: (state, { payload }) => ({\n    ...state,\n    ...payload,\n  }),\n}, defaultState);\n","import { combineActions, createAction, handleActions } from 'redux-actions';\nimport Cookies from 'js-cookie';\nimport { getRandomColor } from '../utils';\n\nconst prefix = 'USER';\n\nconst setTerm = createAction(`${prefix}/SET_TERM`, term => loadData(term));\nconst setDesiredCourses = createAction(`${prefix}/SET_DESIRED_COURSES`, desiredCourses => ({ desiredCourses }));\nconst setPinnedCrns = createAction(`${prefix}/SET_PINNED_CRNS`, pinnedCrns => ({ pinnedCrns }));\nconst setExcludedCrns = createAction(`${prefix}/SET_EXCLUDED_CRNS`, excludedCrns => ({ excludedCrns }));\nconst setColorMap = createAction(`${prefix}/SET_COLOR_MAP`, colorMap => ({ colorMap }));\nconst setSortingOptionIndex = createAction(`${prefix}/SET_SORTING_OPTION_INDEX`, sortingOptionIndex => ({ sortingOptionIndex }));\n\nexport const actions = {\n  setTerm,\n  setDesiredCourses,\n  setPinnedCrns,\n  setExcludedCrns,\n  setColorMap,\n  setSortingOptionIndex,\n};\n\nconst saveData = ({ term, desiredCourses = [], pinnedCrns = [], excludedCrns = [], colorMap = {}, sortingOptionIndex = 0 }) => {\n  Cookies.set('term', term);\n  Cookies.set(term, JSON.stringify({\n    desiredCourses,\n    pinnedCrns,\n    excludedCrns,\n    colorMap,\n    sortingOptionIndex,\n  }), { expires: 365 });\n};\n\nconst loadData = (term = Cookies.get('term')) => {\n  let json = null;\n  try {\n    json = JSON.parse(Cookies.get(term));\n  } catch (e) {\n    json = {};\n  }\n  const { desiredCourses = [], pinnedCrns = [], excludedCrns = [], colorMap = {}, sortingOptionIndex = 0 } = json;\n  desiredCourses.forEach(courseId => {\n    if (!(courseId in colorMap)) {\n      colorMap[courseId] = getRandomColor();\n    }\n  });\n  return { term, desiredCourses, pinnedCrns, excludedCrns, colorMap, sortingOptionIndex };\n};\n\n(function migrate201902() {\n  const deprecatedData = Cookies.get('data');\n  if (deprecatedData) {\n    Cookies.set('term', '201902');\n    Cookies.set('201902', deprecatedData);\n    Cookies.remove('data');\n  }\n})();\nconst defaultState = loadData();\n\nexport default handleActions({\n  [combineActions(\n    setTerm,\n    setDesiredCourses,\n    setPinnedCrns,\n    setExcludedCrns,\n    setColorMap,\n    setSortingOptionIndex,\n  )]: (state, { payload }) => {\n    const newState = {\n      ...state,\n      ...payload,\n    };\n    saveData(newState);\n    return newState;\n  },\n}, defaultState);\n","import { actions as dbActions } from './db';\nimport { actions as envActions } from './env';\nimport { actions as userActions } from './user';\n\nexport { default as db } from './db';\nexport { default as env } from './env';\nexport { default as user } from './user';\n\nexport const actions = {\n  ...dbActions,\n  ...envActions,\n  ...userActions,\n};\n","/* global saveAs, Blob, BlobBuilder, console */\n/* exported ics */\n\nconst ics = function (uidDomain, prodId) {\n  'use strict';\n\n  if (navigator.userAgent.indexOf('MSIE') > -1 && navigator.userAgent.indexOf('MSIE 10') == -1) {\n    console.log('Unsupported Browser');\n    return;\n  }\n\n  if (typeof uidDomain === 'undefined') {\n    uidDomain = 'default';\n  }\n  if (typeof prodId === 'undefined') {\n    prodId = 'Calendar';\n  }\n\n  var SEPARATOR = (navigator.appVersion.indexOf('Win') !== -1) ? '\\r\\n' : '\\n';\n  var calendarEvents = [];\n  var calendarStart = [\n    'BEGIN:VCALENDAR',\n    'PRODID:' + prodId,\n    'VERSION:2.0',\n  ].join(SEPARATOR);\n  var calendarEnd = SEPARATOR + 'END:VCALENDAR';\n  var BYDAY_VALUES = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\n\n  return {\n    /**\n     * Returns events array\n     * @return {array} Events\n     */\n    'events': function () {\n      return calendarEvents;\n    },\n\n    /**\n     * Returns calendar\n     * @return {string} Calendar in iCalendar format\n     */\n    'calendar': function () {\n      return calendarStart + SEPARATOR + calendarEvents.join(SEPARATOR) + calendarEnd;\n    },\n\n    /**\n     * Add event to the calendar\n     * @param  {string} subject     Subject/Title of event\n     * @param  {string} description Description of event\n     * @param  {string} location    Location of event\n     * @param  {string} begin       Beginning date of event\n     * @param  {string} stop        Ending date of event\n     */\n    'addEvent': function (subject, description, location, begin, stop, rrule) {\n      // I'm not in the mood to make these optional... So they are all required\n      if (typeof subject === 'undefined' ||\n        typeof description === 'undefined' ||\n        typeof location === 'undefined' ||\n        typeof begin === 'undefined' ||\n        typeof stop === 'undefined'\n      ) {\n        return false;\n      }\n\n      // validate rrule\n      if (rrule) {\n        if (!rrule.rrule) {\n          if (rrule.freq !== 'YEARLY' && rrule.freq !== 'MONTHLY' && rrule.freq !== 'WEEKLY' && rrule.freq !== 'DAILY') {\n            throw 'Recurrence rrule frequency must be provided and be one of the following: \\'YEARLY\\', \\'MONTHLY\\', \\'WEEKLY\\', or \\'DAILY\\'';\n          }\n\n          if (rrule.until) {\n            if (isNaN(Date.parse(rrule.until))) {\n              throw 'Recurrence rrule \\'until\\' must be a valid date string';\n            }\n          }\n\n          if (rrule.interval) {\n            if (isNaN(parseInt(rrule.interval))) {\n              throw 'Recurrence rrule \\'interval\\' must be an integer';\n            }\n          }\n\n          if (rrule.count) {\n            if (isNaN(parseInt(rrule.count))) {\n              throw 'Recurrence rrule \\'count\\' must be an integer';\n            }\n          }\n\n          if (typeof rrule.byday !== 'undefined') {\n            if ((Object.prototype.toString.call(rrule.byday) !== '[object Array]')) {\n              throw 'Recurrence rrule \\'byday\\' must be an array';\n            }\n\n            if (rrule.byday.length > 7) {\n              throw 'Recurrence rrule \\'byday\\' array must not be longer than the 7 days in a week';\n            }\n\n            // Filter any possible repeats\n            rrule.byday = rrule.byday.filter(function (elem, pos) {\n              return rrule.byday.indexOf(elem) == pos;\n            });\n\n            for (var d in rrule.byday) {\n              if (BYDAY_VALUES.indexOf(rrule.byday[d]) < 0) {\n                throw 'Recurrence rrule \\'byday\\' values must include only the following: \\'SU\\', \\'MO\\', \\'TU\\', \\'WE\\', \\'TH\\', \\'FR\\', \\'SA\\'';\n              }\n            }\n          }\n        }\n      }\n\n      //TODO add time and time zone? use moment to format?\n      var start_date = new Date(begin);\n      var end_date = new Date(stop);\n      var now_date = new Date();\n\n      var start_year = ('0000' + (start_date.getFullYear().toString())).slice(-4);\n      var start_month = ('00' + ((start_date.getMonth() + 1).toString())).slice(-2);\n      var start_day = ('00' + ((start_date.getDate()).toString())).slice(-2);\n      var start_hours = ('00' + (start_date.getHours().toString())).slice(-2);\n      var start_minutes = ('00' + (start_date.getMinutes().toString())).slice(-2);\n      var start_seconds = ('00' + (start_date.getSeconds().toString())).slice(-2);\n\n      var end_year = ('0000' + (end_date.getFullYear().toString())).slice(-4);\n      var end_month = ('00' + ((end_date.getMonth() + 1).toString())).slice(-2);\n      var end_day = ('00' + ((end_date.getDate()).toString())).slice(-2);\n      var end_hours = ('00' + (end_date.getHours().toString())).slice(-2);\n      var end_minutes = ('00' + (end_date.getMinutes().toString())).slice(-2);\n      var end_seconds = ('00' + (end_date.getSeconds().toString())).slice(-2);\n\n      var now_year = ('0000' + (now_date.getFullYear().toString())).slice(-4);\n      var now_month = ('00' + ((now_date.getMonth() + 1).toString())).slice(-2);\n      var now_day = ('00' + ((now_date.getDate()).toString())).slice(-2);\n      var now_hours = ('00' + (now_date.getHours().toString())).slice(-2);\n      var now_minutes = ('00' + (now_date.getMinutes().toString())).slice(-2);\n      var now_seconds = ('00' + (now_date.getSeconds().toString())).slice(-2);\n\n      // Since some calendars don't add 0 second events, we need to remove time if there is none...\n      var start_time = '';\n      var end_time = '';\n      if (start_hours + start_minutes + start_seconds + end_hours + end_minutes + end_seconds != 0) {\n        start_time = 'T' + start_hours + start_minutes + start_seconds;\n        end_time = 'T' + end_hours + end_minutes + end_seconds;\n      }\n      var now_time = 'T' + now_hours + now_minutes + now_seconds;\n\n      var start = start_year + start_month + start_day + start_time;\n      var end = end_year + end_month + end_day + end_time;\n      var now = now_year + now_month + now_day + now_time;\n\n      // recurrence rrule vars\n      var rruleString;\n      if (rrule) {\n        if (rrule.rrule) {\n          rruleString = rrule.rrule;\n        } else {\n          rruleString = 'RRULE:FREQ=' + rrule.freq;\n\n          if (rrule.until) {\n            var uDate = new Date(Date.parse(rrule.until)).toISOString();\n            rruleString += ';UNTIL=' + uDate.substring(0, uDate.length - 13).replace(/[-]/g, '') + '000000Z';\n          }\n\n          if (rrule.interval) {\n            rruleString += ';INTERVAL=' + rrule.interval;\n          }\n\n          if (rrule.count) {\n            rruleString += ';COUNT=' + rrule.count;\n          }\n\n          if (rrule.byday && rrule.byday.length > 0) {\n            rruleString += ';BYDAY=' + rrule.byday.join(',');\n          }\n        }\n      }\n\n      var stamp = new Date().toISOString();\n\n      var calendarEvent = [\n        'BEGIN:VEVENT',\n        'UID:' + calendarEvents.length + '@' + uidDomain,\n        'CLASS:PUBLIC',\n        'DESCRIPTION:' + description,\n        'DTSTAMP;VALUE=DATE-TIME:' + now,\n        'DTSTART;VALUE=DATE-TIME:' + start,\n        'DTEND;VALUE=DATE-TIME:' + end,\n        'LOCATION:' + location,\n        'SUMMARY;LANGUAGE=en-us:' + subject,\n        'TRANSP:TRANSPARENT',\n        'END:VEVENT',\n      ];\n\n      if (rruleString) {\n        calendarEvent.splice(4, 0, rruleString);\n      }\n\n      calendarEvent = calendarEvent.join(SEPARATOR);\n\n      calendarEvents.push(calendarEvent);\n      return calendarEvent;\n    },\n\n    /**\n     * Download calendar using the saveAs function from filesave.js\n     * @param  {string} filename Filename\n     * @param  {string} ext      Extention\n     */\n    'download': function (filename, ext) {\n      if (calendarEvents.length < 1) {\n        return false;\n      }\n\n      ext = (typeof ext !== 'undefined') ? ext : '.ics';\n      filename = (typeof filename !== 'undefined') ? filename : 'calendar';\n      var calendar = calendarStart + SEPARATOR + calendarEvents.join(SEPARATOR) + calendarEnd;\n\n      var blob;\n      if (navigator.userAgent.indexOf('MSIE 10') === -1) { // chrome or firefox\n        blob = new Blob([calendar]);\n      } else { // ie\n        var bb = new BlobBuilder();\n        bb.append(calendar);\n        blob = bb.getBlob('text/x-vCalendar;charset=' + document.characterSet);\n      }\n      saveAs(blob, filename + ext);\n      return calendar;\n    },\n\n    /**\n     * Build and return the ical contents\n     */\n    'build': function () {\n      if (calendarEvents.length < 1) {\n        return false;\n      }\n\n      var calendar = calendarStart + SEPARATOR + calendarEvents.join(SEPARATOR) + calendarEnd;\n\n      return calendar;\n    },\n  };\n};\n\nexport default ics;\n","import { Component } from 'react';\nimport { shallowCompareEntries } from '../../utils';\n\nclass SemiPureComponent extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    const stateChanged = this.state !== nextState;\n    const propsChanged = !shallowCompareEntries(this.props, nextProps);\n    return stateChanged || propsChanged;\n  }\n}\n\nexport default SemiPureComponent;\n","import React, { Component } from 'react';\nimport { classes } from '../../utils';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport './stylesheet.scss';\nimport CopyToClipboard from 'react-copy-to-clipboard';\n\nclass ActionRow extends Component {\n  render() {\n    const { className, children, actions, color, ...restProps } = this.props;\n\n    return (\n      <div className={classes('ActionRow', className)} {...restProps}>\n        {children}\n        <div className={classes('actions', 'default')}>\n          {\n            actions.filter(action => action).map(({ className, icon, ...restProps }, i) => {\n              const props = {\n                key: i,\n                className: classes('action', className),\n                children: (\n                  <div className=\"icon\" style={{ backgroundColor: color }}>\n                    <FontAwesomeIcon fixedWidth icon={icon}/>\n                  </div>\n                ),\n                ...restProps,\n              };\n              return 'href' in props ? (\n                <a {...props} rel=\"noopener noreferrer\" target=\"_blank\"/>\n              ) : 'text' in props ? (\n                <CopyToClipboard {...props}/>\n              ) : (\n                <div {...props}/>\n              );\n            })\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ActionRow;\n","import React, { Component } from 'react';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport { classes } from '../../utils';\nimport './stylesheet.scss';\n\nclass Button extends Component {\n  render() {\n    const { className, disabled, ...restProps } = this.props;\n\n    const props = {\n      className: classes('Button', className),\n      ...restProps,\n    };\n\n    return disabled ? (\n      <button className={props.className} disabled>\n        {props.children}\n      </button>\n    ) : 'href' in props ? (\n      <a {...props} rel=\"noopener noreferrer\" target=\"_blank\"/>\n    ) : 'text' in props ? (\n      <CopyToClipboard {...props}/>\n    ) : (\n      <button {...props}/>\n    );\n  }\n}\n\nexport default Button;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { CLOSE, DAYS, OPEN } from '../../constants';\nimport { classes, timeToShortString } from '../../utils';\nimport { actions } from '../../reducers';\nimport { SemiPureComponent, TimeBlocks } from '../';\nimport './stylesheet.scss';\n\nclass Calendar extends SemiPureComponent {\n  render() {\n    const { className, overlayCrns, preview, capture } = this.props;\n    const mobile = this.props.env.mobile && !capture;\n    const { pinnedCrns } = this.props.user;\n\n    return (\n      <div className={classes('Calendar', mobile && 'mobile', preview && 'preview', className)}>\n        {\n          !preview &&\n          <div className=\"times\">\n            {\n              new Array((CLOSE - OPEN) / 60).fill(0).map((_, i) => {\n                const time = OPEN + i * 60;\n                return (\n                  <div className=\"time\" key={time}>\n                    <span className=\"label\">\n                      {timeToShortString(time)}\n                    </span>\n                  </div>\n                );\n              })\n            }\n          </div>\n        }\n        {\n          !preview &&\n          <div className=\"days\">\n            {\n              DAYS.map(day => (\n                <div className=\"day\" key={day}>\n                    <span className=\"label\">\n                      {day}\n                    </span>\n                </div>\n              ))\n            }\n          </div>\n        }\n        <div className=\"meetings\">\n          {\n            pinnedCrns.map(crn => (\n              <TimeBlocks key={crn} crn={crn} preview={preview} capture={capture}/>\n            ))\n          }\n          {\n            overlayCrns &&\n            overlayCrns.filter(crn => !pinnedCrns.includes(crn)).map(crn => (\n              <TimeBlocks key={crn} crn={crn} overlay={!preview} preview={preview} capture={capture}/>\n            ))\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(({ env, user }) => ({ env, user }), actions)(Calendar);\n","import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport cheerio from \"cheerio\";\nimport $ from \"jquery\";\nimport styled from \"@emotion/styled\";\n\nconst DisplayGpa = props => {\n  const [background, setBackground] = useState();\n  const [courseId, setCourseId] = useState(props.courseId);\n  const [gpa, setGpa] = useState(0);\n  const [url, setUrl] = useState(\"\");\n  const errMessage = \"GPA could not be accessed, try again later\";\n\n  useEffect(() => {\n    let courseString = courseId.replace(\" \", \"%20\");\n    $.ajax({\n      url: `https://cors-anywhere.herokuapp.com/http://critique.gatech.edu/course.php?id=${courseString}`,\n      type: \"GET\",\n      dataType: \"html\",\n      headers: {\n        \"X-Requested-With\": \"XMLHttpRequest\",\n        \"Content-Type\": \"text/html\"\n      },\n      success: res => {\n        // console.log(res);\n        const $ = cheerio.load(res);\n\n        let newGpa = $(\n          \"div.center-table > table.table > tbody:nth-child(2)\",\n          res\n        ).text();\n\n        newGpa = Math.round(newGpa * 100) / 100;\n\n        // console.log(newGpa);\n\n        setGpa(newGpa === 0 ? \"N/A\" : newGpa);\n        setColor(newGpa);\n        setUrl(\n          `https://cors-anywhere.herokuapp.com/http://critique.gatech.edu/course.php?id=${courseString}`\n        );\n      },\n      error: error => {\n        // alert(\"Error while requesting GPA\");\n        setGpa(\"Error\");\n      }\n    });\n  }, []);\n\n  const setColor = value => {\n    setBackground(value2color(value, 2.5, 4.0));\n  };\n\n  const value2color = (value, min, max) => {\n    var base = max - min;\n\n    if (base == 0) {\n      value = 100;\n    } else {\n      value = ((value - min) / base) * 100;\n    }\n    var r,\n      g,\n      b = 0;\n    if (value < 50) {\n      r = 255;\n      g = Math.round(5.1 * value);\n    } else {\n      g = 255;\n      r = Math.round(510 - 5.1 * value);\n    }\n    var h = r * 0x10000 + g * 0x100 + b * 0x1;\n    return \"#\" + (\"000000\" + h.toString(16)).slice(-6);\n  };\n\n  const NormalText = styled.div`\n    font-weight: 500;\n    display: inline-block;\n    font-size: 13px;\n    height: 22px;\n    line-height: 18px;\n  `;\n\n  const TextBox = styled.div`\n    background-color: ${background};\n    width: 40px;\n    height: 22px;\n    margin-left: 8px;\n    line-height: 19px;\n    text-align: center;\n    color: white;\n    font-weight: 500;\n    border: 2px solid #202020;\n    display: inline-block;\n    font-size: 13px;\n  `;\n\n  return (\n    <div>\n      <NormalText>Average GPA:</NormalText>\n      <TextBox>{gpa}</TextBox>\n    </div>\n  );\n};\n\nexport default DisplayGpa;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  faAngleDown,\n  faAngleUp,\n  faInfoCircle,\n  faPalette,\n  faPlus,\n  faTrash\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { classes, getContentClassName } from \"../../utils\";\nimport { actions } from \"../../reducers\";\nimport { ActionRow, Instructor, Palette, SemiPureComponent } from \"../\";\nimport \"./stylesheet.scss\";\nimport axios from \"axios\";\nimport cheerio from \"cheerio\";\nimport DisplayGpa from \"../DisplayGpa\";\n\nclass Course extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expanded: false,\n      paletteShown: false\n    };\n\n    this.handleSelectColor = this.handleSelectColor.bind(this);\n  }\n\n  handleRemoveCourse(course) {\n    const {\n      desiredCourses,\n      pinnedCrns,\n      excludedCrns,\n      colorMap\n    } = this.props.user;\n    this.props.setDesiredCourses(\n      desiredCourses.filter(courseId => courseId !== course.id)\n    );\n    this.props.setPinnedCrns(\n      pinnedCrns.filter(\n        crn => !course.sections.some(section => section.crn === crn)\n      )\n    );\n    this.props.setExcludedCrns(\n      excludedCrns.filter(\n        crn => !course.sections.some(section => section.crn === crn)\n      )\n    );\n    this.props.setColorMap({ ...colorMap, [course.id]: undefined });\n  }\n\n  handleToggleExpanded(expanded = !this.state.expanded) {\n    this.setState({ expanded });\n  }\n\n  handleSelectColor(color) {\n    const { courseId } = this.props;\n    const { colorMap } = this.props.user;\n    this.props.setColorMap({ ...colorMap, [courseId]: color });\n  }\n\n  handleTogglePaletteShown(paletteShown = !this.state.paletteShown) {\n    this.setState({ paletteShown });\n  }\n\n  render() {\n    const { className, courseId, onAddCourse, onSetOverlayCrns } = this.props;\n    const { oscar } = this.props.db;\n    const { term, pinnedCrns, colorMap } = this.props.user;\n    const { expanded, paletteShown } = this.state;\n\n    const course = oscar.findCourse(courseId);\n    const color = colorMap[course.id];\n    const textClassName = getContentClassName(color);\n\n    const instructorMap = {};\n    course.sections.forEach(section => {\n      const [primaryInstructor = \"Not Assigned\"] = section.instructors;\n      if (!(primaryInstructor in instructorMap)) {\n        instructorMap[primaryInstructor] = [];\n      }\n      instructorMap[primaryInstructor].push(section);\n    });\n\n    const infoAction = {\n      icon: faInfoCircle,\n      href: `https://oscar.gatech.edu/pls/bprod/bwckctlg.p_disp_course_detail?cat_term_in=${term}&subj_code_in=${course.subject}&crse_numb_in=${course.number}`\n    };\n\n    return (\n      <div\n        className={classes(\"Course\", textClassName, \"default\", className)}\n        style={{ backgroundColor: color }}\n        key={course.id}\n      >\n        <ActionRow\n          className={classes(\"course-header\", expanded && \"divider-bottom\")}\n          actions={\n            onAddCourse\n              ? [{ icon: faPlus, onClick: onAddCourse }, infoAction]\n              : [\n                  {\n                    icon: expanded ? faAngleUp : faAngleDown,\n                    onClick: () => this.handleToggleExpanded()\n                  },\n                  infoAction,\n                  {\n                    icon: faPalette,\n                    onClick: () => this.handleTogglePaletteShown()\n                  },\n                  {\n                    icon: faTrash,\n                    onClick: () => this.handleRemoveCourse(course)\n                  }\n                ]\n          }\n          color={color}\n        >\n          <div className=\"row\">\n            <span className=\"course_id\" style={{ fontWeight: 750 }}>\n              {course.id}\n              {this.props.fromClass === \"course-list\" ? (\n                <DisplayGpa courseId={courseId} />\n              ) : (\n                <div></div>\n              )}\n            </span>\n\n            <span className=\"section_ids\">\n              {course.sections\n                .filter(section => pinnedCrns.includes(section.crn))\n                .map(section => section.id)\n                .join(\", \")}\n            </span>\n          </div>\n          <div className=\"row\">\n            <span\n              className=\"course_title\"\n              style={{ fontWeight: 700, fontStyle: \"italic\" }}\n              dangerouslySetInnerHTML={{ __html: course.title }}\n            />\n            <span className=\"section_crns\">\n              {course.sections\n                .filter(section => pinnedCrns.includes(section.crn))\n                .map(section => section.crn)\n                .join(\", \")}\n            </span>\n            {paletteShown && (\n              <Palette\n                className=\"palette\"\n                onSelectColor={this.handleSelectColor}\n                color={color}\n                onMouseLeave={() => this.handleTogglePaletteShown(false)}\n              />\n            )}\n          </div>\n        </ActionRow>\n        {expanded && (\n          <div className=\"course-body\">\n            {Object.keys(instructorMap).map(name => (\n              <Instructor\n                key={name}\n                color={color}\n                name={name}\n                sections={instructorMap[name]}\n                onSetOverlayCrns={onSetOverlayCrns}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  ({ db, user }) => ({ db, user }),\n  actions\n)(Course);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Course, SemiPureComponent } from \"../\";\nimport { classes, getRandomColor } from \"../../utils\";\nimport { actions } from \"../../reducers\";\nimport \"./stylesheet.scss\";\n\nclass CourseAdd extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      keyword: \"\"\n    };\n\n    this.inputRef = React.createRef();\n\n    this.handleChangeKeyword = this.handleChangeKeyword.bind(this);\n    this.handlePressEnter = this.handlePressEnter.bind(this);\n  }\n\n  handleChangeKeyword(e) {\n    const keyword = e.target.value;\n    this.setState({ keyword });\n  }\n\n  handlePressEnter(e) {\n    const { oscar } = this.props.db;\n    const { keyword } = this.state;\n\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      const courses = oscar.searchCourses(keyword);\n      if (courses.length) this.handleAddCourse(courses[0]);\n    }\n  }\n\n  handleAddCourse(course) {\n    const { desiredCourses, excludedCrns, colorMap } = this.props.user;\n    if (desiredCourses.includes(course.id)) return;\n    const tbaCrns = course.sections\n      .filter(\n        section =>\n          !section.meetings.length ||\n          section.meetings.some(\n            meeting => !meeting.days.length || !meeting.period\n          )\n      )\n      .map(section => section.crn);\n    this.props.setDesiredCourses([...desiredCourses, course.id]);\n    this.props.setExcludedCrns([...excludedCrns, ...tbaCrns]);\n    this.props.setColorMap({ ...colorMap, [course.id]: getRandomColor() });\n\n    this.setState({ keyword: \"\" });\n    this.inputRef.current.focus();\n  }\n\n  render() {\n    const { className } = this.props;\n    const { oscar } = this.props.db;\n    const { desiredCourses, pinnedCrns } = this.props.user;\n    const { keyword } = this.state;\n\n    return (\n      <div className={classes(\"CourseAdd\", className)}>\n        <input\n          type=\"text\"\n          ref={this.inputRef}\n          value={keyword}\n          onChange={this.handleChangeKeyword}\n          className=\"keyword\"\n          placeholder=\"XX 0000\"\n          onKeyPress={this.handlePressEnter}\n        />\n        <div className=\"autocomplete\">\n          {oscar\n            .searchCourses(keyword)\n            .filter(course => !desiredCourses.includes(course.id))\n            .map(course => (\n              <Course\n                key={course.id}\n                courseId={course.id}\n                pinnedCrns={pinnedCrns}\n                onAddCourse={() => this.handleAddCourse(course)}\n                fromClass=\"autocomplete\"\n              />\n            ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  ({ db, user }) => ({ db, user }),\n  actions\n)(CourseAdd);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  faAngleDown,\n  faAngleUp,\n  faBan,\n  faCheck,\n  faInfoCircle,\n  faThumbtack,\n  faTimes,\n} from '@fortawesome/free-solid-svg-icons';\nimport { classes, periodToString, simplifyName, unique } from '../../utils';\nimport { actions } from '../../reducers';\nimport { ActionRow, SemiPureComponent } from '../';\nimport './stylesheet.scss';\n\nclass Instructor extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expanded: true,\n    };\n  }\n\n  handleTogglePinned(section) {\n    const { pinnedCrns, excludedCrns } = this.props.user;\n    if (pinnedCrns.includes(section.crn)) {\n      this.props.setPinnedCrns(pinnedCrns.filter(crn => crn !== section.crn));\n    } else {\n      this.props.setPinnedCrns([...pinnedCrns, section.crn]);\n      this.props.setExcludedCrns(excludedCrns.filter(crn => crn !== section.crn));\n    }\n  }\n\n  handleToggleExcluded(section) {\n    const { pinnedCrns, excludedCrns } = this.props.user;\n    if (excludedCrns.includes(section.crn)) {\n      this.props.setExcludedCrns(excludedCrns.filter(crn => crn !== section.crn));\n    } else {\n      this.props.setExcludedCrns([...excludedCrns, section.crn]);\n      this.props.setPinnedCrns(pinnedCrns.filter(crn => crn !== section.crn));\n    }\n  }\n\n  handleExcludeAll() {\n    const { sections } = this.props;\n    const { pinnedCrns, excludedCrns } = this.props.user;\n    const crns = sections.map(section => section.crn);\n    this.props.setExcludedCrns(unique([...excludedCrns, ...crns]));\n    this.props.setPinnedCrns(pinnedCrns.filter(crn => !crns.includes(crn)));\n  }\n\n  handleIncludeAll() {\n    const { sections } = this.props;\n    const { excludedCrns } = this.props.user;\n    const crns = sections.map(section => section.crn);\n    this.props.setExcludedCrns(excludedCrns.filter(crn => !crns.includes(crn)));\n  }\n\n  handleToggleExpanded(expanded = !this.state.expanded) {\n    this.setState({ expanded });\n  }\n\n  render() {\n    const { className, color, name, sections, onSetOverlayCrns } = this.props;\n    const { term, pinnedCrns, excludedCrns } = this.props.user;\n    const { expanded } = this.state;\n\n    const instructorExcluded = sections.every(section => excludedCrns.includes(section.crn));\n    const instructorPinned = sections.some(section => pinnedCrns.includes(section.crn));\n\n    return (\n      <div className={classes('Instructor', className)}>\n        <ActionRow\n          className={classes('name', 'divider-bottom', instructorExcluded && 'strikethrough', !instructorPinned && 'inactive')}\n          actions={[\n            { icon: expanded ? faAngleUp : faAngleDown, onClick: () => this.handleToggleExpanded() },\n            !['TBA', 'Not Assigned'].includes(name) && {\n              icon: faInfoCircle,\n              href: `http://www.ratemyprofessors.com/search.jsp?queryBy=teacherName&schoolName=Georgia+Institute+of+Technology&query=${encodeURIComponent(simplifyName(name))}`,\n            },\n            instructorExcluded ?\n              { icon: faCheck, onClick: () => this.handleIncludeAll() } :\n              { icon: faBan, onClick: () => this.handleExcludeAll() },\n          ]} color={color}>\n          {name || 'Not Assigned'}\n        </ActionRow>\n        {\n          expanded &&\n          <div className=\"sections\">\n            {\n              sections.map(section => {\n                const excluded = excludedCrns.includes(section.crn);\n                const pinned = pinnedCrns.includes(section.crn);\n                return (\n                  <ActionRow\n                    className={classes('section', 'divider-bottom', excluded && 'strikethrough', !pinned && 'inactive')}\n                    onMouseEnter={() => onSetOverlayCrns([section.crn])}\n                    onMouseLeave={() => onSetOverlayCrns([])} actions={[\n                    { icon: pinned ? faTimes : faThumbtack, onClick: () => this.handleTogglePinned(section) },\n                    {\n                      icon: faInfoCircle,\n                      href: `https://oscar.gatech.edu/pls/bprod/bwckschd.p_disp_detail_sched?term_in=${term}&crn_in=${section.crn}`,\n                    },\n                    { icon: excluded ? faCheck : faBan, onClick: () => this.handleToggleExcluded(section) },\n                  ]} color={color} key={section.id}>\n                    <div className=\"section-header\">\n                      <span className=\"section_id\">{section.id}</span>\n                    </div>\n                    <div className=\"meetings\">\n                      {\n                        section.meetings.map((meeting, i) => {\n                          return (\n                            <div className=\"meeting\" key={i}>\n                              <span className=\"days\">{meeting.days.join('')}</span>\n                              <span className=\"period\">{periodToString(meeting.period)}</span>\n                            </div>\n                          );\n                        })\n                      }\n                    </div>\n                  </ActionRow>\n                );\n              })\n            }\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default connect(({ user }) => ({ user }), actions)(Instructor);\n","import React, { Component } from 'react';\nimport { classes } from '../../utils';\nimport './stylesheet.scss';\n\nclass Palette extends Component {\n  render() {\n    const { className, color, onSelectColor, ...restProps } = this.props;\n\n    return (\n      <div className={classes('Palette', className)} {...restProps}>\n        {\n          [\n            ['#4D4D4D', '#999999', '#FFFFFF', '#F44E3B', '#FE9200', '#FCDC00', '#DBDF00', '#A4DD00', '#68CCCA', '#73D8FF', '#AEA1FF', '#FDA1FF'],\n            ['#333333', '#808080', '#CCCCCC', '#D33115', '#E27300', '#FCC400', '#B0BC00', '#68BC00', '#16A5A5', '#009CE0', '#7B64FF', '#FA28FF'],\n            ['#000000', '#666666', '#B3B3B3', '#9F0500', '#C45100', '#FB9E00', '#808900', '#194D33', '#0C797D', '#0062B1', '#653294', '#AB149E'],\n          ].map((colors, i) => (\n            <div className=\"palette-row\" key={i}>\n              {\n                colors.map(paletteColor => (\n                  <div className={classes('color', paletteColor === color && 'frame')} key={paletteColor}\n                       style={{ backgroundColor: paletteColor }} onClick={() => onSelectColor(paletteColor)}/>),\n                )\n              }\n            </div>\n          ))\n        }\n      </div>\n    );\n  }\n}\n\nexport default Palette;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { classes, getContentClassName, periodToString } from '../../utils';\nimport { CLOSE, OPEN } from '../../constants';\nimport { SemiPureComponent } from '../';\nimport { actions } from '../../reducers';\nimport './stylesheet.scss';\n\nclass TimeBlocks extends SemiPureComponent {\n  render() {\n    const { className, crn, overlay, preview, capture } = this.props;\n    const { oscar } = this.props.db;\n    const mobile = this.props.env.mobile && !capture;\n    const { colorMap } = this.props.user;\n\n    const section = oscar.findSection(crn);\n    const color = colorMap[section.course.id];\n    const textClassName = getContentClassName(color);\n\n    return (\n      <div className={classes('TimeBlocks', mobile && 'mobile', overlay && 'overlay', className)}>\n        {\n          section.meetings.map((meeting, i) => meeting.period && (\n            meeting.days.map(day => (\n              <div className={classes('meeting', textClassName, 'default', day)} key={[i, day].join('-')}\n                   style={{\n                     top: (meeting.period.start - OPEN) / (CLOSE - OPEN) * 100 + '%',\n                     height: (meeting.period.end - meeting.period.start) / (CLOSE - OPEN) * 100 + '%',\n                     backgroundColor: color,\n                   }}>\n                {\n                  !preview &&\n                  <div className=\"meeting-wrapper\">\n                    <span className=\"course_id\">{section.course.id}{mobile ? '' : ` ${section.id}`}</span>\n                    <span className=\"period\">{periodToString(meeting.period)}</span>\n                    {\n                      !mobile &&\n                      <span className=\"where\">{meeting.where}</span>\n                    }\n                    {\n                      !mobile &&\n                      <span className=\"instructors\">{meeting.instructors.join(', ')}</span>\n                    }\n                  </div>\n                }\n              </div>\n            ))\n          ))\n        }\n      </div>\n    );\n  }\n}\n\nexport default connect(({ env, db, user }) => ({ env, db, user }), actions)(TimeBlocks);\n","import { Course, SortingOption } from './';\nimport { hasConflictBetween } from '../utils';\n\nclass Oscar {\n  constructor(data) {\n    const { courses, dateRanges, scheduleTypes, campuses } = data;\n\n    this.dateRanges = dateRanges.map(dateRange => {\n      const [from, to] = dateRange.split(' - ').map(v => new Date(v));\n      from.setHours(0);\n      to.setHours(23, 59, 59, 999);\n      return { from, to };\n    });\n    this.scheduleTypes = scheduleTypes;\n    this.campuses = campuses;\n    this.courses = Object.keys(courses).map(courseId => new Course(this, courseId, courses[courseId]));\n    this.courseMap = {};\n    this.crnMap = {};\n    this.courses.forEach(course => {\n      this.courseMap[course.id] = course;\n      course.sections.forEach(section => {\n        this.crnMap[section.crn] = section;\n      });\n    });\n    this.sortingOptions = [\n      new SortingOption('Most Compact', combination => {\n        const { startMap, endMap } = combination;\n        const diffs = Object.keys(startMap).map(day => endMap[day] - startMap[day]);\n        const sum = diffs.reduce((sum, min) => sum + min, 0);\n        return +sum;\n      }),\n      new SortingOption('Earliest Ending', combination => {\n        const { endMap } = combination;\n        const ends = Object.values(endMap);\n        const sum = ends.reduce((sum, end) => sum + end, 0);\n        const avg = sum / ends.length;\n        return +avg;\n      }),\n      new SortingOption('Latest Beginning', combination => {\n        const { startMap } = combination;\n        const starts = Object.values(startMap);\n        const sum = starts.reduce((sum, min) => sum + min, 0);\n        const avg = sum / starts.length;\n        return -avg;\n      }),\n    ];\n  }\n\n  findCourse(courseId) {\n    return this.courseMap[courseId];\n  }\n\n  findSection(crn) {\n    return this.crnMap[crn];\n  }\n\n  searchCourses(keyword) {\n    const [, subject, number] = /^\\s*([a-zA-Z]*)\\s*(\\d*)\\s*$/.exec(keyword.toUpperCase()) || [];\n    if (subject && number) {\n      return this.courses.filter(course => course.subject === subject && course.number.startsWith(number));\n    } else if (subject) {\n      return this.courses.filter(course => course.subject === subject);\n    } else if (number) {\n      return this.courses.filter(course => course.number.startsWith(number));\n    } else {\n      return [];\n    }\n  }\n\n  getCombinations(desiredCourses, pinnedCrns, excludedCrns) {\n    const crnsList = [];\n    const dfs = (courseIndex = 0, crns = []) => {\n      if (courseIndex === desiredCourses.length) {\n        crnsList.push(crns);\n        return;\n      }\n      const course = this.findCourse(desiredCourses[courseIndex]);\n      const isIncluded = section => !excludedCrns.includes(section.crn);\n      const isPinned = section => pinnedCrns.includes(section.crn);\n      const hasConflict = section => [...pinnedCrns, ...crns].some(crn => hasConflictBetween(this.findSection(crn), section));\n      if (course.hasLab) {\n        const pinnedOnlyLecture = course.onlyLectures.find(isPinned);\n        const pinnedOnlyLab = course.onlyLabs.find(isPinned);\n        const pinnedAllInOne = course.allInOnes.find(isPinned);\n        if ((pinnedOnlyLecture && pinnedOnlyLab) || pinnedAllInOne) {\n          dfs(courseIndex + 1, crns);\n        } else if (pinnedOnlyLecture) {\n          pinnedOnlyLecture.associatedLabs.filter(isIncluded).forEach(lab => {\n            if (hasConflict(lab)) return;\n            dfs(courseIndex + 1, [...crns, lab.crn]);\n          });\n        } else if (pinnedOnlyLab) {\n          pinnedOnlyLab.associatedLectures.filter(isIncluded).forEach(lecture => {\n            if (hasConflict(lecture)) return;\n            dfs(courseIndex + 1, [...crns, lecture.crn]);\n          });\n        } else {\n          course.onlyLectures.filter(isIncluded).forEach(lecture => {\n            if (hasConflict(lecture)) return;\n            lecture.associatedLabs.filter(isIncluded).forEach(lab => {\n              if (hasConflict(lab)) return;\n              dfs(courseIndex + 1, [...crns, lecture.crn, lab.crn]);\n            });\n          });\n          course.allInOnes.filter(isIncluded).forEach(section => {\n            if (hasConflict(section)) return;\n            dfs(courseIndex + 1, [...crns, section.crn]);\n          });\n        }\n      } else {\n        if (course.sections.some(isPinned)) {\n          dfs(courseIndex + 1, crns);\n        } else {\n          Object.values(course.sectionGroups).forEach(sectionGroup => {\n            const section = sectionGroup.sections.find(isIncluded);\n            if (!section || hasConflict(section)) return;\n            dfs(courseIndex + 1, [...crns, section.crn]);\n          });\n        }\n      }\n    };\n    dfs();\n    return crnsList.map(crns => {\n      const startMap = {};\n      const endMap = {};\n      this.iterateTimeBlocks([...pinnedCrns, ...crns], (day, period) => {\n        if (!(day in startMap) || startMap[day] > period.start) startMap[day] = period.start;\n        if (!(day in endMap) || endMap[day] < period.end) endMap[day] = period.end;\n      });\n      return {\n        crns,\n        startMap,\n        endMap,\n      };\n    });\n  }\n\n  sortCombinations(combinations, sortingOptionIndex) {\n    const sortingOption = this.sortingOptions[sortingOptionIndex];\n    return combinations.map(combination => ({\n      ...combination,\n      factor: sortingOption.calculateFactor(combination),\n    })).sort((a, b) => a.factor - b.factor);\n  }\n\n  iterateTimeBlocks(crns, callback) {\n    crns.forEach(crn => {\n      this.findSection(crn).meetings.forEach(meeting => meeting.period && (\n        meeting.days.forEach(day => {\n          callback(day, meeting.period);\n        })\n      ));\n    });\n  }\n}\n\nexport default Oscar;\n","import { Section } from \"./\";\nimport { hasConflictBetween, isLab, isLecture } from \"../utils\";\n\nclass Course {\n  constructor(oscar, courseId, data) {\n    const [title, sections] = data;\n\n    this.id = courseId;\n    [this.subject, this.number] = this.id.split(\" \");\n    this.title = title;\n    this.sections = Object.keys(sections).map(\n      sectionId => new Section(oscar, this, sectionId, sections[sectionId])\n    );\n\n    //this.gpa = this.fetchGpa(courseId);\n\n    const onlyLectures = this.sections.filter(\n      section => isLecture(section) && !isLab(section)\n    );\n    const onlyLabs = this.sections.filter(\n      section => isLab(section) && !isLecture(section)\n    );\n    this.hasLab = onlyLectures.length && onlyLabs.length;\n    if (this.hasLab) {\n      onlyLectures.forEach(\n        lecture =>\n          (lecture.associatedLabs = onlyLabs.filter(lab =>\n            lab.id.startsWith(lecture.id)\n          ))\n      );\n      onlyLabs.forEach(\n        lab =>\n          (lab.associatedLectures = onlyLectures.filter(lecture =>\n            lab.id.startsWith(lecture.id)\n          ))\n      );\n      const lonelyLectures = onlyLectures.filter(\n        lecture => !lecture.associatedLabs.length\n      );\n      const lonelyLabs = onlyLabs.filter(lab => !lab.associatedLectures.length);\n      lonelyLectures.forEach(\n        lecture =>\n          (lecture.associatedLabs = lonelyLabs.filter(\n            lab => !hasConflictBetween(lecture, lab)\n          ))\n      );\n      lonelyLabs.forEach(\n        lab =>\n          (lab.associatedLectures = lonelyLectures.filter(\n            lecture => !hasConflictBetween(lecture, lab)\n          ))\n      );\n      this.onlyLectures = onlyLectures;\n      this.onlyLabs = onlyLabs;\n      this.allInOnes = this.sections.filter(\n        section => isLecture(section) && isLab(section)\n      );\n    } else {\n      this.sectionGroups = this.distinct(this.sections);\n    }\n  }\n\n  distinct(sections) {\n    let groups = {};\n    sections.forEach(section => {\n      const sectionGroupMeetings = section.meetings.map(({ days, period }) => ({\n        days,\n        period\n      }));\n      const sectionGroupHash = JSON.stringify(sectionGroupMeetings);\n      const sectionGroup = groups[sectionGroupHash];\n      if (sectionGroup) {\n        sectionGroup.sections.push(section);\n      } else {\n        groups[sectionGroupHash] = {\n          hash: sectionGroupHash,\n          meetings: sectionGroupMeetings,\n          sections: [section]\n        };\n      }\n    });\n    return groups;\n  }\n}\n\nexport default Course;\n","import { stringToTime, unique } from '../utils';\n\nclass Section {\n  constructor(oscar, course, sectionId, data) {\n    const [crn, meetings, credits, scheduleTypeIndex, campusIndex] = data;\n\n    this.course = course;\n    this.id = sectionId;\n    this.crn = crn;\n    this.credits = credits;\n    this.scheduleType = oscar.scheduleTypes[scheduleTypeIndex];\n    this.campus = oscar.campuses[campusIndex];\n    this.meetings = meetings.map(([period, days, where, instructors, dateRangeIndex]) => ({\n      period: period === 'TBA' ? undefined : {\n        start: stringToTime(period.split(' - ')[0]),\n        end: stringToTime(period.split(' - ')[1]),\n      },\n      days: days === '&nbsp;' ? [] : [...days],\n      where,\n      instructors: instructors.map(instructor => instructor.replace(/ \\(P\\)$/, '')),\n      dateRange: oscar.dateRanges[dateRangeIndex],\n    }));\n    this.instructors = unique(this.meetings.reduce((instructors, meeting) => [...instructors, ...meeting.instructors], []));\n  }\n}\n\nexport default Section;\n","class SortingOption {\n  constructor(label, calculateFactor) {\n    this.label = label;\n    this.calculateFactor = calculateFactor;\n  }\n}\n\nexport default SortingOption;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport domtoimage from \"dom-to-image\";\nimport saveAs from \"file-saver\";\nimport memoizeOne from \"memoize-one\";\nimport { AutoSizer, List } from \"react-virtualized/dist/commonjs\";\nimport ics from \"../../libs/ics\";\nimport { classes, getSemesterName, isMobile } from \"../../utils\";\nimport { PNG_SCALE_FACTOR } from \"../../constants\";\nimport { Button, Calendar, Course, CourseAdd, SemiPureComponent } from \"../\";\nimport { actions } from \"../../reducers\";\nimport { Oscar } from \"../../beans\";\nimport \"github-fork-ribbon-css/gh-fork-ribbon.css\";\nimport \"react-virtualized/styles.css\";\nimport \"./stylesheet.scss\";\n\nclass App extends SemiPureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      terms: [],\n      overlayCrns: [],\n      tabIndex: 0\n    };\n\n    this.captureRef = React.createRef();\n  }\n\n  componentDidMount() {\n    const { term } = this.props.user;\n    if (term) this.loadOscar(term);\n    axios\n      .get(\"https://jasonpark.me/gt-schedule-crawler/terms.json\")\n      .then(res => {\n        const terms = res.data.reverse();\n        if (!term) {\n          const recentTerm = terms[0];\n          this.handleChangeSemester(recentTerm);\n        }\n        this.setState({ terms });\n      });\n\n    window.addEventListener(\"resize\", this.handleResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.handleResize);\n  }\n\n  loadOscar(term) {\n    this.props.setOscar(null);\n    axios\n      .get(`https://jasonpark.me/gt-schedule-crawler/${term}.json`)\n      .then(res => {\n        const oscar = new Oscar(res.data);\n        this.memoizedGetCombinations = memoizeOne(\n          oscar.getCombinations.bind(oscar)\n        );\n        this.memoizedSortCombinations = memoizeOne(\n          oscar.sortCombinations.bind(oscar)\n        );\n        this.props.setOscar(oscar);\n      });\n  }\n\n  getTotalCredits() {\n    const { oscar } = this.props.db;\n    const { pinnedCrns } = this.props.user;\n    return pinnedCrns.reduce(\n      (credits, crn) => credits + oscar.findSection(crn).credits,\n      0\n    );\n  }\n\n  handleResize = e => {\n    const { mobile } = this.props.env;\n    const nextMobile = isMobile();\n    if (mobile !== nextMobile) {\n      this.props.setMobile(nextMobile);\n    }\n  };\n\n  handleSetOverlayCrns = overlayCrns => {\n    this.setState({ overlayCrns });\n  };\n\n  handleExport = () => {\n    const { oscar } = this.props.db;\n    const { pinnedCrns } = this.props.user;\n    const cal = ics();\n    pinnedCrns.forEach(crn => {\n      const section = oscar.findSection(crn);\n      section.meetings.forEach(meeting => {\n        if (!meeting.period || !meeting.days.length) return;\n        const { from, to } = meeting.dateRange;\n        const subject = section.course.id;\n        const description = section.course.title;\n        const location = meeting.where;\n        const begin = new Date(from);\n        while (\n          !meeting.days.includes(\n            [\"-\", \"M\", \"T\", \"W\", \"R\", \"F\", \"-\"][begin.getDay()]\n          )\n        ) {\n          begin.setDate(begin.getDate() + 1);\n        }\n        begin.setHours(\n          (meeting.period.start / 60) | 0,\n          meeting.period.start % 60\n        );\n        const end = new Date(begin);\n        end.setHours((meeting.period.end / 60) | 0, meeting.period.end % 60);\n        const rrule = {\n          freq: \"WEEKLY\",\n          until: to,\n          byday: meeting.days.map(\n            day => ({ M: \"MO\", T: \"TU\", W: \"WE\", R: \"TH\", F: \"FR\" }[day])\n          )\n        };\n        cal.addEvent(subject, description, location, begin, end, rrule);\n      });\n    });\n    cal.download(\"gt-scheduler\");\n  };\n\n  handleDownload = () => {\n    const { current } = this.captureRef;\n    domtoimage\n      .toPng(current, {\n        width: current.offsetWidth * PNG_SCALE_FACTOR,\n        height: current.offsetHeight * PNG_SCALE_FACTOR,\n        style: {\n          left: 0,\n          transform: `scale(${PNG_SCALE_FACTOR})`,\n          \"transform-origin\": \"top left\"\n        }\n      })\n      .then(blob => saveAs(blob, \"schedule.png\"));\n  };\n\n  handleChangeTab = tabIndex => {\n    this.setState({ tabIndex });\n  };\n\n  handleChangeSemester = term => {\n    this.props.setTerm(term);\n    this.loadOscar(term);\n  };\n\n  handleSetPinnedCrns = pinnedCrns => {\n    this.props.setPinnedCrns(pinnedCrns);\n  };\n\n  handleResetPinnedCrns = () => {\n    if (window.confirm(\"Are you sure to reset sections you selected?\")) {\n      this.props.setPinnedCrns([]);\n    }\n  };\n\n  handleChangeSortingOptionIndex = e => {\n    const sortingOptionIndex = e.target.value;\n    this.props.setSortingOptionIndex(sortingOptionIndex);\n  };\n\n  render() {\n    const { mobile } = this.props.env;\n    const { oscar } = this.props.db;\n    const {\n      term,\n      desiredCourses,\n      pinnedCrns,\n      excludedCrns,\n      sortingOptionIndex\n    } = this.props.user;\n    const { terms, overlayCrns, tabIndex } = this.state;\n\n    if (!oscar) return null;\n\n    const combinations = this.memoizedGetCombinations(\n      desiredCourses,\n      pinnedCrns,\n      excludedCrns\n    );\n    const sortedCombinations = this.memoizedSortCombinations(\n      combinations,\n      sortingOptionIndex\n    );\n\n    return (\n      <div className={classes(\"App\", mobile && \"mobile\")}>\n        {(!mobile || tabIndex === 2) && (\n          <div className=\"calendar-container\">\n            <Calendar overlayCrns={overlayCrns} />\n          </div>\n        )}\n        <div className=\"capture-container\" ref={this.captureRef}>\n          <Calendar className=\"fake-calendar\" capture />\n        </div>\n        {(!mobile || tabIndex === 1) && (\n          <div className=\"sidebar sidebar-combinations\">\n            <div className=\"header\">\n              <span className=\"secondary\">{combinations.length} Combos</span>\n              <Button className=\"primary\">\n                <select\n                  onChange={this.handleChangeSortingOptionIndex}\n                  value={sortingOptionIndex}\n                >\n                  {oscar.sortingOptions.map((sortingOption, i) => (\n                    <option key={i} value={i}>\n                      {sortingOption.label}\n                    </option>\n                  ))}\n                </select>\n              </Button>\n            </div>\n            <div className=\"scroller\">\n              <AutoSizer>\n                {({ width, height }) => (\n                  <List\n                    width={width}\n                    height={height}\n                    rowCount={sortedCombinations.length}\n                    rowHeight={100}\n                    rowRenderer={({ index, key, style }) => {\n                      const { crns } = sortedCombinations[index];\n                      return (\n                        <div\n                          className=\"combination\"\n                          key={key}\n                          style={style}\n                          onMouseEnter={() => this.handleSetOverlayCrns(crns)}\n                          onMouseLeave={() => this.handleSetOverlayCrns([])}\n                          onClick={() =>\n                            this.handleSetPinnedCrns([...pinnedCrns, ...crns])\n                          }\n                        >\n                          <div className=\"number\">{index + 1}</div>\n                          <Calendar\n                            className=\"calendar-preview\"\n                            overlayCrns={crns}\n                            preview\n                          />\n                        </div>\n                      );\n                    }}\n                  />\n                )}\n              </AutoSizer>\n            </div>\n            <div className=\"footer\">\n              <Button\n                onClick={this.handleResetPinnedCrns}\n                disabled={pinnedCrns.length === 0}\n              >\n                Reset Sections\n              </Button>\n            </div>\n          </div>\n        )}\n        {(!mobile || tabIndex === 0) && (\n          <div className=\"sidebar sidebar-courses\">\n            <div className=\"header\">\n              <span className=\"secondary\">\n                {this.getTotalCredits()} Credits\n              </span>\n              <Button className=\"primary\">\n                <select\n                  onChange={e => this.handleChangeSemester(e.target.value)}\n                  value={term}\n                >\n                  {terms.map(term => (\n                    <option key={term} value={term}>\n                      {getSemesterName(term)}\n                    </option>\n                  ))}\n                </select>\n              </Button>\n            </div>\n            <div className=\"scroller\">\n              <div className=\"course-list\">\n                {desiredCourses.map(courseId => {\n                  return (\n                    <Course\n                      courseId={courseId}\n                      expandable\n                      key={courseId}\n                      onSetOverlayCrns={this.handleSetOverlayCrns}\n                      fromClass=\"course-list\"\n                    />\n                  );\n                })}\n              </div>\n              <CourseAdd />\n            </div>\n            <div className=\"footer\">\n              <Button\n                text={pinnedCrns.join(\", \")}\n                disabled={pinnedCrns.length === 0}\n              >\n                <span>Copy CRNs</span>\n              </Button>\n              <Button\n                onClick={this.handleDownload}\n                disabled={pinnedCrns.length === 0}\n              >\n                Download as PNG\n              </Button>\n              <Button\n                onClick={this.handleExport}\n                disabled={pinnedCrns.length === 0}\n              >\n                Export Calendar\n              </Button>\n            </div>\n          </div>\n        )}\n        {mobile && (\n          <div className=\"tab-container\">\n            {[\"Courses\", \"Combinations\", \"Calendar\"].map((tabTitle, i) => (\n              <div\n                className={classes(\"tab\", tabIndex === i && \"active\")}\n                onClick={() => this.handleChangeTab(i)}\n                key={i}\n              >\n                {tabTitle}\n              </div>\n            ))}\n          </div>\n        )}\n        <a\n          className=\"github-fork-ribbon left-bottom fixed\"\n          href=\"https://github.com/parkjs814/gt-scheduler\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          data-ribbon=\"Fork me on GitHub\"\n          title=\"Fork me on GitHub\"\n        >\n          Fork me on GitHub\n        </a>\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  ({ env, db, user }) => ({ env, db, user }),\n  actions\n)(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { combineReducers, createStore } from 'redux';\nimport * as reducers from './reducers';\nimport App from './components/App';\nimport 'normalize.css'\nimport './stylesheet.scss';\n\nconst store = createStore(combineReducers(reducers));\n\nReactDOM.render(<Provider store={store}><App/></Provider>, document.getElementById('root'));\n"],"sourceRoot":""}